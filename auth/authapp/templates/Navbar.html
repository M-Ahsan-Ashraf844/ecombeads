<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Beads byShafaq</title>
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    
    <link rel="stylesheet" href="{% static 'css/output.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* Custom dark scrollbar */
      .dark-scrollbar::-webkit-scrollbar {
        width: 4px;
      }
      .dark-scrollbar::-webkit-scrollbar-track {
        background: rgba(15, 23, 42, 0.3);
      }
      .dark-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(236, 72, 153, 0.5);
        border-radius: 4px;
      }
      .dark-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: rgba(236, 72, 153, 0.5) rgba(15, 23, 42, 0.3);
      }
    </style>
  </head>

  <body class="bg-gray-100">
    <!-- NAVBAR -->
    <nav
      class="sticky top-0 z-50 bg-gray-900 shadow-2xl mt-3 mx-3 rounded-2xl border border-gray-700/30 backdrop-blur-sm"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <!-- Logo -->
          <div class="flex items-center gap-3">
            <div class="text-2xl font-bold tracking-tight text-white">
              <span
                class="bg-gradient-to-r from-white via-gray-100 to-pink-100 bg-clip-text text-transparent"
              >
                Beads <span class="text-pink-400">byShafaq</span>
              </span>
            </div>
          </div>

          <!-- Desktop Categories -->
          <div
            class="hidden lg:flex items-center gap-6 text-gray-300 font-medium ml-4"
          >
            <div class="relative group">
              <button
                class="flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-800/50 hover:bg-gray-700/70 transition-all duration-300 border border-gray-700/50 hover:border-pink-500/30"
              >
                <i class="fas fa-layer-group text-pink-400"></i>
                <span class="font-semibold">Categories</span>
                <svg
                  class="w-4 h-4 mt-0.5 transition-transform group-hover:rotate-180"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>

              <div
                class="absolute left-0 mt-2 w-64 bg-gray-900 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50 border border-gray-700 overflow-hidden"
              >
                <div class="p-3">
                  <h3 class="text-white font-bold mb-3 px-2">
                    Shop Categories
                  </h3>
                  <div class="space-y-1">
                    {% for cat in categories %}
                    <a
                      href="{% url 'category' cat_id=cat.id %}"
                      class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-800 transition-all duration-200"
                    >
                      <div
                        class="w-8 h-8 rounded-lg bg-gray-800 flex items-center justify-center"
                      >
                        <i class="fas fa-gem text-pink-400 text-sm"></i>
                      </div>
                      <span class="text-gray-200 font-medium"
                        >{{ cat.category }}</span
                      >
                    </a>
                    {% endfor %}
                  </div>

                  <div class="mt-3 pt-3 border-t border-gray-800">
                    <a
                      href="{% url 'all_categories' %}"
                      class="w-full flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white py-2 px-4 rounded-lg font-medium transition"
                    >
                      View All
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Search -->
          <div class="flex-1 mx-6 hidden lg:block">
            <form
              method="POST"
              action="{% url 'search_home' %}"
              class="relative"
            >
              {% csrf_token %}
              <div class="relative flex items-center">
                <span class="absolute left-4 flex items-center text-gray-400">
                  <i class="fas fa-search"></i>
                </span>
                <input
                  name="q"
                  value="{{ request.GET.q }}"
                  placeholder="Search products..."
                  class="w-full pl-12 pr-4 py-2.5 bg-gray-800 border border-gray-700 text-gray-200 rounded-xl placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-pink-500 focus:border-pink-500 transition"
                />
              </div>
            </form>
          </div>

          <!-- Right Icons -->
          <div class="flex items-center gap-3">
            <!-- Cart -->
            <a href="{% url 'mycart' %}" class="relative">
              <div
                class="p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-pink-500/30 transition"
              >
                <i
                  class="fas fa-shopping-bag text-lg text-gray-300 hover:text-pink-400"
                ></i>

                <span
                  id="cart-count"
                  class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center "
                >
                  {{ cart_count|default:"0" }}
                </span>
              </div>
            </a>

            <!-- Mobile Menu Button -->
            <button
              id="menu-btn"
              class="lg:hidden p-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-pink-500/30 transition"
            >
              <i
                class="fas fa-bars text-lg text-gray-300 hover:text-pink-400"
              ></i>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- ðŸ“± MOBILE MENU - DARK, SIMPLE, FIXED -->
    <div
      id="mobile-menu"
      class="fixed inset-0 z-40 bg-gray-900 transition-all duration-300 ease-out transform translate-x-full"
    >
      <!-- Mobile Header -->
      <div
        class="flex items-center justify-between p-4 border-b border-gray-800 bg-gray-900"
      >
        <div class="text-xl font-bold text-white">
          <span class="text-pink-400">Menu</span>
        </div>
        <button
          id="close-menu"
          class="p-2 rounded-lg hover:bg-gray-800 transition"
        >
          <i class="fas fa-times text-xl text-gray-300"></i>
        </button>
      </div>

      <!-- Mobile Content - Scrollable -->
      <div class="h-[calc(100vh-64px)] overflow-y-auto dark-scrollbar">
        <!-- Search -->
        <div class="p-4 border-b border-gray-800">
          <form method="POST" action="{% url 'search_home' %}">
            {% csrf_token %}
            <div class="relative">
              <span
                class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"
              >
                <i class="fas fa-search"></i>
              </span>
              <input
                type="text"
                name="q"
                value="{{ request.GET.q }}"
                placeholder="Search products..."
                class="w-full pl-10 pr-4 py-3 bg-gray-800 border border-gray-700 text-gray-200 rounded-lg placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-pink-500 focus:border-pink-500 transition"
              />
            </div>
          </form>
        </div>

        <!-- Navigation -->
        <div class="p-4">
          <a
            href="{% url 'home' %}"
            class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-800 transition mb-2"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center"
            >
              <i class="fas fa-home text-pink-400"></i>
            </div>
            <span class="text-gray-200 font-medium">Home</span>
          </a>

          <a
            href="{% url 'about' %}"
            class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-800 transition"
          >
            <div
              class="w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center"
            >
              <i class="fas fa-info-circle text-blue-400"></i>
            </div>
            <span class="text-gray-200 font-medium">About Us</span>
          </a>
        </div>

        <!-- Categories Section -->
        <div class="p-4 border-t border-gray-800">
          <div class="flex items-center gap-2 mb-4">
            <div
              class="w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center"
            >
              <i class="fas fa-gem text-pink-400"></i>
            </div>
            <div>
              <h3 class="text-lg font-bold text-white">Categories</h3>
              <p class="text-xs text-gray-400">Browse our collections</p>
            </div>
          </div>

          <div class="space-y-2">
            {% for cat in categories %}
            <a
              href="{% url 'category' cat_id=cat.id %}"
              class="flex items-center justify-between p-3 rounded-lg bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-pink-500/30 transition"
            >
              <div class="flex items-center gap-3">
                <div
                  class="w-8 h-8 rounded-lg bg-gray-900 flex items-center justify-center"
                >
                  <i class="fas fa-chevron-right text-pink-400 text-xs"></i>
                </div>
                <span class="text-gray-200 font-medium"
                  >{{ cat.category }}</span
                >
              </div>
              <i class="fas fa-arrow-right text-gray-500 text-sm"></i>
            </a>
            {% empty %}
            <div class="text-center py-6">
              <i class="fas fa-inbox text-gray-600 text-2xl mb-2"></i>
              <p class="text-gray-400">No categories available</p>
            </div>
            {% endfor %}
          </div>

          <!-- View All Button -->
          <div class="mt-4">
            <a
              href="{% url 'all_categories' %}"
              class="w-full flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white py-3 px-4 rounded-lg font-medium transition border border-gray-700"
            >
              <i class="fas fa-th-large"></i>
              View All Categories
            </a>
          </div>
        </div>

        <!-- Cart Link -->
        <div class="p-4 border-t border-gray-800">
          <a
            href="{% url 'mycart' %}"
            class="flex items-center justify-between p-3 rounded-lg bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-pink-500/30 transition"
          >
            <div class="flex items-center gap-3">
              <div
                class="w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center"
              >
                <i class="fas fa-shopping-bag text-pink-400"></i>
              </div>
              <div>
                <span class="text-gray-200 font-medium block"
                  >Shopping Cart</span
                >
                <span class="text-xs text-gray-400"
                  >{{ cart_count|default:"0" }} items</span
                >
              </div>
            </div>
            <i class="fas fa-chevron-right text-gray-500"></i>
          </a>
        </div>

        <!-- Footer -->
        <div class="p-6 border-t border-gray-800 mt-4">
          <div class="text-center">
            <div class="text-2xl font-bold text-white mb-2">
              Beads <span class="text-pink-400">byShafaq</span>
            </div>
            <p class="text-gray-400 text-sm">Handcrafted with passion</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.querySelectorAll(".add-to-cart-btn").forEach(btn => {
  btn.addEventListener("click", function () {
    const productId = this.dataset.productId;
    const quantity = this.dataset.quantity || 1;

    fetch("{% url 'cart_ajax' %}", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-Requested-With": "XMLHttpRequest",
      },
      body: JSON.stringify({
        product_id: productId,
        quantity: quantity,
      })
    })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        const badge = document.getElementById("cart-count");
        badge.innerText = data.cart_count;

        // small animation
        badge.classList.add("scale-125");
        setTimeout(() => badge.classList.remove("scale-125"), 200);
      }
    })
    .catch(err => console.error(err));
  });
});
      const menu = document.getElementById("mobile-menu");
      const menuBtn = document.getElementById("menu-btn");
      const closeBtn = document.getElementById("close-menu");

      // Open menu
      menuBtn.onclick = (e) => {
        e.stopPropagation();
        menu.classList.remove("translate-x-full");
      };

      // Close menu
      closeBtn.onclick = () => {
        menu.classList.add("translate-x-full");
      };

      // Close menu when clicking outside
      document.addEventListener("click", function (e) {
        if (!menu.contains(e.target) && !menuBtn.contains(e.target)) {
          menu.classList.add("translate-x-full");
        }
      });

      // Close menu on escape key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          menu.classList.add("translate-x-full");
        }
      });

      // Close menu when clicking on links
      document.querySelectorAll("#mobile-menu a").forEach((link) => {
        link.addEventListener("click", () => {
          menu.classList.add("translate-x-full");
        });
      });
    </script>
  </body>
</html>
